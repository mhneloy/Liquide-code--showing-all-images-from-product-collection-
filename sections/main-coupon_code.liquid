{%- if collection.metafields.custom.coupon_code != blank -%}
    <!-- coupon_code.liquid -->
    <div class="modal fade" id="jsCoupon-{{ section.id }}" role="dialog" aria-hidden="true" 
      data-delay="{{ section.settings.coupon_time | times: 1000 }}" 
      data-section-id="{{ section.id }}"
      data-section-type="promo-code"   >
      <div class="modal-dialog modal-dialog--coupon modal-dialog-centered" role="document">
        <div class="modal-content" {%- if collection.metafields.custom.coupon_image != blank -%}style="background:url({{collection.metafields.custom.coupon_image}}) white no-repeat center ; background-size:cover;"{%- endif -%}>
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">{%- render 'icon-close' -%}</button>
          </div>
          <div class="modal-body ">
            <div class="pt-4 pb-5">
            <p class="coupon-promotion">{{ collection.metafields.custom.promotion }}</p>
            <div class="position-relative pt-3">
              <input id="coupon_code" type="text" value="{{ collection.metafields.custom.coupon_code }}">
              <button class="btn btn-theme js-btn-coupon">Copy</button>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
    <style>
      .modal-dialog--coupon{max-width:520px!important;text-align:center}#coupon_code{background:0 0;text-align:center;font-weight:700;color:var(--g-main);border:2px dashed var(--g-main);transition:all ease .45s;cursor:pointer;padding:0;font-size:24px}.js-btn-coupon{position:absolute;width:100%;top:0;left:0;opacity:0}
    </style>
    {%- endif -%}

{% schema %}
{
  "name": "Popup Promo Collection",
  "settings": [
    {
      "type": "header",
      "content": "Coupon popup"
    },
    {
      "type": "paragraph",
      "content": "ðŸ’¡ Work with [discount code](/admin/discounts)."
    },
    {
      "type": "paragraph",
      "content": "ðŸ’¡ Create Metafeild [Create](/admin/metafields/collection/create)."
    },
    {
      "type": "paragraph",
      "content": "ðŸ’¡ Set blank to make hidden. You can use HTML in promotion text."
    },
    {
      "type": "paragraph",
      "content": "1 => custom.coupon_code"
    },
    {
      "type": "paragraph",
      "content": "2 => custom.coupon_image"
    },
    {
      "type": "paragraph",
      "content": "3 => custom.promotion"
    },
    {
      "type": "range",
      "id": "coupon_time",
      "min": 1,
      "max": 10,
      "step": 0.1,
      "unit": "s",
      "label": "Delay time before show popup:",
      "default": 3
    }
  ]
}
{% endschema %}